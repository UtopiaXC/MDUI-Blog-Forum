<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="images/favicon.ico">
    <title id="page_title">{{page_title}}</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/mdui@1.0.1/dist/css/mdui.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/styles/vs.min.css"/>
    <link rel="stylesheet" href="css/highlight-vs2015-style.css"/>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/style.css"/>
</head>

<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-loaded">

<header id="header" class="mc-appbar mdui-appbar mdui-appbar-fixed">
    <div class="mdui-toolbar mdui-color-theme toolbar">
        <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white"
              mdui-drawer="{target: '#slider', swipe: true}"><i class="mdui-icon material-icons">menu</i></span>
        <a href="/" class="mdui-typo-headline mdui-hidden-xs" id="site_name">{{ site_name }}</a>

        <form method="get" class="search-bar" action="">
            <button type="button" class="back mdui-btn mdui-btn-icon"><i
                    class="mdui-icon material-icons mdui-text-color-theme-icon">arrow_back</i></button>
            <button type="submit" class="submit mdui-btn mdui-btn-icon"><i
                    class="mdui-icon material-icons mdui-text-color-theme-icon">search</i></button>
            <label for="search"></label>
            <input id="search" type="text" placeholder="搜索文章">

            <button type="button" class="cancel mdui-btn mdui-btn-icon"><i
                    class="mdui-icon material-icons mdui-text-color-theme-icon">close</i></button>
        </form>

        <div class="mdui-toolbar-spacer"></div>

        <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white" mdui-dialog="{target: '#dialog-theme'}"
              mdui-tooltip="{content: '设置主题'}"><i class="mdui-icon material-icons">color_lens</i></span>
        <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white"
              onclick="window.location.href='notification.html'"
              mdui-tooltip="{content: '通知中心'}"><i class="mdui-icon material-icons">&#xe7f4;</i></span>
        <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white"
              onclick="window.location.href='user_center.html'"
              mdui-tooltip="{content: '用户'}"><i class="mdui-icon material-icons">account_circle</i></span>
    </div>
</header>

<div class="mdui-drawer" id="slider" open.mdui.collapse>
    <div class="mdui-list" mdui-collapse="{accordion: true}" style="margin-bottom: 76px;">
        <div class="mdui-collapse-item" onclick="window.location.href='/'">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-blue">&#xe88a;</i>
                <div class="mdui-list-item-content">主页</div>
            </div>
        </div>
        <div class="mdui-collapse-item" onclick="window.location.href='topics.html'">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-green">&#xe866;</i>
                <div class="mdui-list-item-content">话题板块</div>
            </div>
        </div>
        <div class="mdui-divider"></div>
        <div class="mdui-collapse-item ">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-brown">&#xe853;</i>
                <div class="mdui-list-item-content">我的账户</div>
                <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
            </div>
            <div class="mdui-collapse-item-body mdui-list" v-html="account" id="account">
                {{ account }}
            </div>
        </div>
        <div class="mdui-collapse-item ">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-purple">&#xe8d3;</i>
                <div class="mdui-list-item-content">人脉</div>
                <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
            </div>
            <div class="mdui-collapse-item-body mdui-list">
                <a href="subscription.html" class="mdui-list-item mdui-ripple ">我关注的</a>
                <a href="fans.html" class="mdui-list-item mdui-ripple ">我的粉丝</a>
            </div>
        </div>
        <div class="mdui-collapse-item" onclick="window.location.href='notifications.html'">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-red">&#xe7f4;</i>
                <div class="mdui-list-item-content">通知</div>
            </div>
        </div>
        <div class="mdui-divider"></div>
        <div class="mdui-collapse-item" onclick="window.location.href='about.html'">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-green">&#xe887;</i>
                <div class="mdui-list-item-content">关于本站</div>
            </div>
        </div>
        <div class="mdui-collapse-item" onclick="window.location.href='privacy.html'">
            <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-grey">&#xe899;</i>
                <div class="mdui-list-item-content">隐私权</div>
            </div>
        </div>
    </div>
</div>

<a id="anchor-top"></a>

<div id="drawing_progress" class="mdui-progress">
    <div class="mdui-progress-indeterminate"></div>
</div>

<div class="mdui-appbar-with-toolbar mg-app">
    <div id="page-index" class="mdui-container"><a class="header mdui-ripple" href="">
        <div class="mdui-text-color-theme-secondary">浏览全部话题</div>
        <i class="mdui-icon material-icons">arrow_forward</i></a>
        <div class="topics-wrapper">
            <div class="topics" id="topics">

            </div>
            <div class="mc-loading mdui-hidden">
                <div class="mdui-spinner">
                    <div class="mdui-spinner-layer ">
                        <div class="mdui-spinner-circle-clipper mdui-spinner-left">
                            <div class="mdui-spinner-circle"></div>
                        </div>
                        <div class="mdui-spinner-gap-patch">
                            <div class="mdui-spinner-circle"></div>
                        </div>
                        <div class="mdui-spinner-circle-clipper mdui-spinner-right">
                            <div class="mdui-spinner-circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="items-wrapper">
            <div class="items-container">
                <div class="items mdui-card"><a class="header mdui-ripple" href="latest_articles.html">
                    <div class="mdui-text-color-theme-secondary">最新文章</div>
                    <i class="mdui-icon material-icons mdui-text-color-theme">arrow_forward</i></a>
                    <div class="content" id="latest_articles">
                        <div class="mc-loading mdui-hidden">
                            <div class="mdui-spinner">
                                <div class="mdui-spinner-layer ">
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-left">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-gap-patch">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-right">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="items-container">
                <div class="items mdui-card"><a class="header mdui-ripple" href="hot_articles.html">
                    <div class="mdui-text-color-theme-secondary">热门文章</div>
                    <i class="mdui-icon material-icons mdui-text-color-theme">arrow_forward</i></a>
                    <div class="content" id="hot_articles">
                        <div class="mc-loading mdui-hidden">
                            <div class="mdui-spinner">
                                <div class="mdui-spinner-layer ">
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-left">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-gap-patch">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-right">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="items-wrapper">
            <div class="items-container">
                <div class="items mdui-card"><a class="header mdui-ripple" href="announcement.html">
                    <div class="mdui-text-color-theme-secondary">最新公告</div>
                    <i class="mdui-icon material-icons mdui-text-color-theme">arrow_forward</i></a>
                    <div class="content" id="announcement">
                        <div class="mc-loading mdui-hidden">
                            <div class="mdui-spinner">
                                <div class="mdui-spinner-layer ">
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-left">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-gap-patch">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-right">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="items-container">
                <div class="items mdui-card"><a class="header mdui-ripple" href="users_list.html">
                    <div class="mdui-text-color-theme-secondary">活跃用户</div>
                    <i class="mdui-icon material-icons mdui-text-color-theme">arrow_forward</i></a>
                    <div class="content" id="activity_users">
                        <div class="mc-loading mdui-hidden">
                            <div class="mdui-spinner">
                                <div class="mdui-spinner-layer ">
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-left">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-gap-patch">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                    <div class="mdui-spinner-circle-clipper mdui-spinner-right">
                                        <div class="mdui-spinner-circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button onclick="add_article()" class="mdui-fab mdui-fab-fixed mdui-fab-extended mdui-ripple mdui-color-theme">
    <i class="mdui-icon material-icons">add</i><span>写文章</span></button>

<div class="doc-footer-nav">
    <div class="mdui-container">
        <div class="mdui-row">
            <div class="rights" id="footer" v-html="footer">
                {{ footer }}
            </div>
        </div>
    </div>
</div>

</body>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.polyfills.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/holderjs@2.9.7/holder.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.1/build/highlight.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mdui@1.0.1/dist/js/mdui.min.js"></script>

<script src="js/render.js"></script>
<script src="js/contents.js"></script>
<script>
$.ajax({
    url:api,
    method:"post",
    dataType:"json",
    data:{
        "function":"get_index"
    },
    success : function (result){
        for (i=0;i<result.data.topics_count;i++){
            $("#topics").append("<div class='mc-topic-item item-inner'>" +
                "                    <div class='item mdui-card\'" +
                "                         style='background-image: url("+result.data.topics[i].topic_picture+"); background-size:360px 150px'>" +
                "                        <a class='mdui-ripple info' href='topic.html?topic_id="+result.data.topics[i].topic_id+"'>" +
                "                            <div class='name mdui-text-color-theme-text'>"+result.data.topics[i].topic_title+"</div>" +
                "                        </a>" +
                "                    </div>" +
                "                </div>");
        }
        if (result.data.articles_count!==0) {
            for (i = 0; i < result.data.articles_count; i++) {
                $("#latest_articles").append('<a class="item" href="article.html?article_id=' + result.data.articles[i].article_id + '">\n' +
                    '                            <div class="title mdui-text-color-theme-text">' + result.data.articles[i].article_user_id + '：' + result.data.articles[i].article_title + '</div>\n' +
                    '                        </a>')
            }
        }else{
            $("#latest_articles").append('<a class="item" href="#">\n' +
                '                            <div class="title mdui-text-color-theme-text">暂无文章</div>\n' +
                '                        </a>')
        }
        if (result.data.hot_articles_count!==0) {
            for (i = 0; i < result.data.hot_articles_count; i++) {
                $("#hot_articles").append('<a class="item" href="article.html?article_id=' + result.data.hot_articles[i].article_id + '">\n' +
                    '                            <div class="title mdui-text-color-theme-text">' + result.data.hot_articles[i].article_user_id + '：' + result.data.hot_articles[i].article_title + '</div>\n' +
                    '                        </a>')
            }
        }else{
            $("#hot_articles").append('<a class="item" href="#">\n' +
                '                            <div class="title mdui-text-color-theme-text">暂无文章</div>\n' +
                '                        </a>')
        }
        if (result.data.users_count!==0) {
            for (i = 0; i < result.data.users_count; i++) {
                $("#activity_users").append('<a class="item" href="user_center.html?user_id=' + result.data.users[i].user_id + '">\n' +
                    '                            <div class="title mdui-text-color-theme-text">' + result.data.users[i].user_name+'</div>\n' +
                    '                        </a>')
            }
        }else{
            $("#activity_users").append('<a class="item" href="#">\n' +
                '                            <div class="title mdui-text-color-theme-text">暂无活跃用户</div>\n' +
                '                        </a>')
        }
        $("#announcement").append('<a class="item" href="#">\n' +
            '                            <div class="title mdui-text-color-theme-text">暂不支持</div>\n' +
            '                        </a>')
        $("#drawing_progress").hide();
    },
    error: function (){
        $("#drawing_progress").hide();
    }
})

</script>
</html>